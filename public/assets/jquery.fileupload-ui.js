/*
 * jQuery File Upload User Interface Plugin 3.2.2
 *
 * Copyright 2010, Sebastian Tschan, AQUANTUM
 * Licensed under the MIT license:
 * http://creativecommons.org/licenses/MIT/
 *
 * https://blueimp.net
 * http://www.aquantum.de
 */
!function(t){var e,i;e=function(e,i){var n,s,o=this,a="undefined",r="function";this.dropZone=e,this.progressSelector=".file_upload_progress div",this.cancelSelector=".file_upload_cancel div",this.cssClassSmall="file_upload_small",this.cssClassLarge="file_upload_large",this.cssClassHighlight="file_upload_highlight",this.dropEffect="highlight",this.uploadTable=this.downloadTable=t(),this.buildUploadRow=this.buildDownloadRow=function(){return null},this.addNode=function(e,i,n){i?i.css("display","none").appendTo(e).fadeIn(function(){if(typeof n===r)try{n()}catch(e){throw t(this).stop(),e}}):typeof n===r&&n()},this.removeNode=function(e,i){e?e.fadeOut(function(){if(t(this).remove(),typeof i===r)try{i()}catch(e){throw t(this).stop(),e}}):typeof i===r&&i()},this.onAbort=function(t,e,i,n,s){o.removeNode(s.uploadRow)},this.cancelUpload=function(t,e,i,n,s){var o=n.readyState;n.abort(),(isNaN(o)||2>o)&&s.onAbort(t,e,i,n,s)},this.initProgressBar=function(e,i){if(typeof e.progressbar===r)return e.progressbar({value:i});var n=t('<progress value="'+i+'" max="100"/>').appendTo(e);return n.progressbar=function(t,e){n.attr("value",e)},n},this.initUploadRow=function(t,e,i,n,s,a){var r=s.uploadRow=o.buildUploadRow(e,i);r&&(s.progressbar=o.initProgressBar(r.find(o.progressSelector),n.upload?0:100),r.find(o.cancelSelector).click(function(t){o.cancelUpload(t,e,i,n,s)})),o.addNode(o.uploadTable,r,a)},this.initUpload=function(t,e,i,n,s,a){o.initUploadRow(t,e,i,n,s,function(){typeof o.beforeSend===r?o.beforeSend(t,e,i,n,s,a):a()})},this.onProgress=function(t,e,i,n,s){s.progressbar&&s.progressbar.progressbar("value",parseInt(100*(t.loaded/t.total),10))},this.parseResponse=function(e){return typeof e.responseText!==a?t.parseJSON(e.responseText):t.parseJSON(e.contents().text())},this.initDownloadRow=function(t,e,i,n,s,a){var l,h;try{l=s.response=o.parseResponse(n),h=s.downloadRow=o.buildDownloadRow(l),o.addNode(o.downloadTable,h,a)}catch(c){if(typeof o.onError!==r)throw c;s.originalEvent=t,o.onError(c,e,i,n,s)}},this.onLoad=function(t,e,i,n,s){o.removeNode(s.uploadRow,function(){o.initDownloadRow(t,e,i,n,s,function(){typeof o.onComplete===r&&o.onComplete(t,e,i,n,s)})})},this.dropZoneEnlarge=function(){s||(typeof o.dropZone.switchClass===r?o.dropZone.switchClass(o.cssClassSmall,o.cssClassLarge):(o.dropZone.addClass(o.cssClassLarge),o.dropZone.removeClass(o.cssClassSmall)),s=!0)},this.dropZoneReduce=function(){typeof o.dropZone.switchClass===r?o.dropZone.switchClass(o.cssClassLarge,o.cssClassSmall):(o.dropZone.addClass(o.cssClassSmall),o.dropZone.removeClass(o.cssClassLarge)),s=!1},this.onDocumentDragEnter=function(){o.dropZoneEnlarge()},this.onDocumentDragOver=function(){n&&clearTimeout(n),n=setTimeout(function(){o.dropZoneReduce()},200)},this.onDragEnter=this.onDragLeave=function(){o.dropZone.toggleClass(o.cssClassHighlight)},this.onDrop=function(){n&&clearTimeout(n),o.dropEffect&&typeof o.dropZone.effect===r?o.dropZone.effect(o.dropEffect,function(){o.dropZone.removeClass(o.cssClassHighlight),o.dropZoneReduce()}):(o.dropZone.removeClass(o.cssClassHighlight),o.dropZoneReduce())},t.extend(this,i)},i={init:function(i){return this.each(function(){t(this).fileUpload(new e(t(this),i))})},destroy:function(e){return this.each(function(){t(this).fileUpload("destroy",e)})}},t.fn.fileUploadUI=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(t.error("Method "+e+" does not exist on jQuery.fileUploadUI"),void 0):i.init.apply(this,arguments)}}(jQuery);